class ShareModal extends HTMLElement {
  constructor() {
    super();
    this.attachShadow({
      mode: "open",
    });
    this._title = "";
    this._description = "";

    this.render();
  }

  get title() {
    return this._title;
  }
  get description() {
    return this._description;
  }

  set title(value) {
    this._title = value;
    this.render();
  }
  set description(value) {
    this._description = value;
    this.render();
  }

  render() {
    const { origin, pathname } = window.location;
	const PAGE_URL = encodeURIComponent(`${origin}${pathname}`);
    this.shadowRoot.innerHTML = `
    <style>
    h1 {
      -webkit-line-clamp: 1;
      line-clamp: 1 !important;
      font-size: 1em;
      font-weight: 700;
      line-height: 1.33333;
      margin-bottom: 0.33333em;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    h4 {
      font-size: 0.7em;
      font-weight: 400;
      line-height: 1.5;
      margin-bottom: 1em;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    svg{
    height:50px;
    }
    a {
        width: 30px;
        height: 50px;
        display: flex;
    }
  </style>
  <div
    part="share-modal"
    class="cnx-share"
    style="width: 100%; height: 100%; color: white;"
  >
    <cnx-api-button
      style="position: absolute; right: -5px; top: -5px;     transform: scale(0.8);"
      part="buttons modal-close"
      cnxLabel="Close"
      ,
      cnxToolTip="Close"
      id="modal-close-button"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="24"
        viewBox="0 -960 960 960"
        width="24"
      >
        <path
          d="m336-280 144-144 144 144 56-56-144-144 144-144-56-56-144 144-144-144-56 56 144 144-144 144 56 56ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"
        />
      </svg>
    </cnx-api-button>
    <form style="padding:15px 15px">
      <h1>
        Share: ${this.title}
      </h1>
      <h4>${this.description}</h4>
        <div
          style="
            height: 50px;
            display: flex;
            flex-wrap: nowrap;
            flex-direction: row;
            align-items: center;
            gap:10px;
        "
        >        
        <a
          href="https://www.facebook.com/sharer/sharer.php?u=${PAGE_URL}"
          aria-role="link"
          aria-label="Share on Facebook"
          title="Facebook"
          target="_blank"
        >
        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 48 48">
<path fill="#039be5" d="M24 5A19 19 0 1 0 24 43A19 19 0 1 0 24 5Z"></path><path fill="#fff" d="M26.572,29.036h4.917l0.772-4.995h-5.69v-2.73c0-2.075,0.678-3.915,2.619-3.915h3.119v-4.359c-0.548-0.074-1.707-0.236-3.897-0.236c-4.573,0-7.254,2.415-7.254,7.917v3.323h-4.701v4.995h4.701v13.729C22.089,42.905,23.032,43,24,43c0.875,0,1.729-0.08,2.572-0.194V29.036z"></path>
</svg>
        </a>

        <a
          href="https://www.linkedin.com/shareArticle?mini=true&amp;url=${PAGE_URL}&amp;summary=${encodeURIComponent(this.title)}&amp;source=Classic"
          aria-role="link"
          aria-label="Share on LinkedIn"
          title="LinkedIn"
          target="_blank"
        >
        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 48 48">
<path fill="#0288D1" d="M42,37c0,2.762-2.238,5-5,5H11c-2.761,0-5-2.238-5-5V11c0-2.762,2.239-5,5-5h26c2.762,0,5,2.238,5,5V37z"></path><path fill="#FFF" d="M12 19H17V36H12zM14.485 17h-.028C12.965 17 12 15.888 12 14.499 12 13.08 12.995 12 14.514 12c1.521 0 2.458 1.08 2.486 2.499C17 15.887 16.035 17 14.485 17zM36 36h-5v-9.099c0-2.198-1.225-3.698-3.192-3.698-1.501 0-2.313 1.012-2.707 1.99C24.957 25.543 25 26.511 25 27v9h-5V19h5v2.616C25.721 20.5 26.85 19 29.738 19c3.578 0 6.261 2.25 6.261 7.274L36 36 36 36z"></path>
</svg>
        </a>

        <a
          href="https://pinterest.com/pin/create/button/?url=${PAGE_URL}&amp;description=${encodeURIComponent(this.title)}&amp;is_video=true"
          class="vjs-social-share-link vjs-icon-pinterest"
          aria-role="link"
          aria-label="Share on Pinterest"
          title="Pinterest"
          target="_blank"
        >
        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 48 48">
<path fill="#d32f2f" d="M24,4C13,4,4,13,4,24s9,20,20,20s20-9,20-20S35,4,24,4z"></path><path fill="#fff" d="M19.6,27c0-3.3-0.6-4.5-0.6-5.8c0-3,2.1-3.2,3-3.2c1.3,0,3,0.9,3,2.5c0,2.4-2,2.7-2,2.7s0,0.8,0,2.3	c0,1.5,0.4,3.5,3.1,3.5c4.4,0,4.9-6.2,4.9-7.8c0-2.3-1.5-7.2-6.8-7.2c-7.1,0-8.2,6.3-8.2,8c0,0.7,0.1,2.1,0.3,2.7	c2.1,0.5,1.6,2.4,1,2.9c-0.8,0.8-4.3,0.9-4.3-6.2C13,14.5,19.1,11,24.4,11C29.5,11,35,14.5,35,21.2c0,6-4.3,10.8-8.9,10.8	c-2.7,0-4.2-2.2-4.2-2.2c0,4.2-3.5,10.3-4,11.2C18,41,19.6,33.1,19.6,27z"></path>
</svg>
        </a>

        <a
          href="https://www.tumblr.com/share?v=3&amp;u=${PAGE_URL}&amp;t=${encodeURIComponent(this.title)}"
          aria-role="link"
          aria-label="Share on Tumblr"
          title="Tumblr"
          target="_blank"
        >
        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 48 48">
<path fill="#01579B" d="M42,37c0,2.762-2.238,5-5,5H11c-2.761,0-5-2.238-5-5V11c0-2.762,2.239-5,5-5h26c2.762,0,5,2.238,5,5V37z"></path><path fill="#FFF" d="M32,34.891c0,0.095-0.037,0.184-0.109,0.247C31.803,35.215,29.723,37,24.947,37c-5.726,0-5.893-6.409-5.893-7.141L19,22h-2.672C16.146,22,16,21.853,16,21.671V18.57c0-0.135,0.083-0.259,0.208-0.309c0.052-0.02,5.171-2.083,5.171-6.933c0-0.183,0.146-0.329,0.327-0.329h2.966C24.854,11,25,11.146,25,11.329V18h5.67c0.182,0,0.33,0.146,0.33,0.328v3.345C31,21.856,30.852,22,30.67,22H25v7.711c0,0.101,0.316,2.519,2.76,2.519c2.023,0,3.721-1.044,3.74-1.055c0.1-0.064,0.227-0.066,0.333-0.009C31.936,31.223,32,31.334,32,31.455V34.891L32,34.891z"></path>
</svg>
        </a>

        <a
          href="https://twitter.com/intent/tweet?text=${encodeURIComponent(this.title)}%0A${PAGE_URL}"
          aria-role="link"
          aria-label="Share on X"
          title="X"
          target="_blank"
        >
        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 48 48">
<path fill="#212121" fill-rule="evenodd" d="M38,42H10c-2.209,0-4-1.791-4-4V10c0-2.209,1.791-4,4-4h28	c2.209,0,4,1.791,4,4v28C42,40.209,40.209,42,38,42z" clip-rule="evenodd"></path><path fill="#fff" d="M34.257,34h-6.437L13.829,14h6.437L34.257,34z M28.587,32.304h2.563L19.499,15.696h-2.563 L28.587,32.304z"></path><polygon fill="#fff" points="15.866,34 23.069,25.656 22.127,24.407 13.823,34"></polygon><polygon fill="#fff" points="24.45,21.721 25.355,23.01 33.136,14 31.136,14"></polygon>
</svg>
        </a>
      </div>
    </form>
  </div>

          `;
  }
  connectedCallback() {
    this.render();
  }
}

customElements.define("cnx-share-modal", ShareModal);
